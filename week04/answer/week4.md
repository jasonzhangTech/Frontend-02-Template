### 第四周练习讲解

> 各位同学一定要自己完成 `Toy Browser`， 本周的课程是基于第四周的代码基础上的。

#### 关于状态机的练习

状态机这块的练习大家基本都完成的不错，集中问题在于以下几点：

1. 在查找 `abcdef` 的练习中，有部分同学指出了视频中代码的逻辑问题。关系这块视频中代码的逻辑是有漏洞的，应该在每个 if-else 分支内清除其上一个分支的查找状态。否则代码对于类似 `abacdef` 这样的字符串验证也是通过的。
1. 部分同学在写查找 `abcdef` 的练习过程中，将代码写成了 `判断字符串是否同时包含 abcdef 这六个字母` 这样的逻辑。这块我已经在练习评语中指出了问题。
1. 关于使用 `KMP` 查找字符串的代码，我自己写了一个版本，具体见附件。

#### 关于 Toy Browser

1. Server 中，关于 Buffer 这一块，视频中的代码有个小失误。 `Buffer.concat` 是只能连接 `Buffer` 的，不能连接字符串。要不去掉代码中的 `toString` 要不就把 `Buffer` 改成 `Array`。
1. 关于 Send 这块，大部分同学遇到了 `400` 响应。遇到 `400` 响应一般是发送的请求数据结构有问题。可能是 HTTP 头数据格式不对，也可能是 `Content-Length` 长度与 `Request Body` 长度不一致，这块需要查找下具体原因。
1. 关于 `HTML Parser` 这块按照 `whatwg` 上的标准找这写就可以了，可以省略部分状态。
1. 关于` DOM 树构建` 这块，需要注意不要产生空的文本节点，相邻文本节点需要合并。
1. 关于 `Toy Browser` 这块，我自己也写了个版本可以参考下，具体见附件。